<!DOCTYPE html>
<html>
<head>
    <title>Stream Video</title>
    <script>
    async function generateLink(msg_id) {
        document.getElementById('link-btn').disabled = true;
        document.getElementById('link-btn').innerText = "Generating...";
        const resp = await fetch(/api/generate-link?msg_id=${msg_id});
        const data = await resp.json();
        if (data.streamingUrl) {
            document.getElementById('video-link').innerHTML =
                <a href="${data.streamingUrl}" target="_blank">Watch Video</a>;
        } else {
            document.getElementById('video-link').innerText = "Error generating link";
        }
    }
    </script>
</head>
<body>
    <h2>Video Title Here</h2>
    <button id="link-btn" onclick="generateLink('12345')">Generate Link</button>
    <div id="video-link"></div>
</body>
</html>
